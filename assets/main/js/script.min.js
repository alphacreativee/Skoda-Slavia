import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function heroSwiper(){document.querySelectorAll(".hero-swiper").forEach(e=>{let t;function i(s){s.pagination.bullets.forEach((e,t)=>{let i=e.querySelector(".progress-bar-swiper");t<s.realIndex?(e.classList.add("viewed"),e.classList.remove("swiper-pagination-bullet-active"),i.style.width="100%",i.style.transition="none"):t===s.realIndex?(e.classList.remove("viewed","swiper-pagination-bullet-active"),i.style.width="0%",i.style.transition="none",setTimeout(()=>{i.style.width="100%",i.style.transition=`width ${s.params.autoplay.delay}ms linear`,setTimeout(()=>{e.classList.add("viewed"),e.classList.add("swiper-pagination-bullet-active")},s.params.autoplay.delay)},50)):(e.classList.remove("viewed","swiper-pagination-bullet-active"),i.style.width="0%",i.style.transition="none")})}new Swiper(e,{slidesPerView:1,watchSlidesProgress:!0,speed:1500,loop:!0,autoplay:{delay:3e3},pagination:{el:e.querySelector(".swiper-pagination"),clickable:!0,renderBullet:function(e,t){return`
            <button class="${t}">
              <span class="progress-bar-swiper"></span>
            </button>`}},on:{init(e){i(e)},slideChangeTransitionStart(e){e.params.autoplay.delay=3e3,clearTimeout(t)},slideChangeTransitionEnd(e){i(e)},progress(i){i.slides.forEach(e=>{var t=(e.progress||0)*(.9*i.width),e=e.querySelector(".hero-img");e&&!isNaN(t)&&(e.style.transform=`translate3d(${t}px, 0, 0)`)})},touchStart(e){e.slides.forEach(e=>{e.style.transition=""}),clearTimeout(t)},setTransition(e,t){let i="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(e=>{e.style.transition=t+"ms "+i;e=e.querySelector(".hero-img");e&&(e.style.transition=t+"ms "+i)})}}})})}function sectionDesign(){if(!($(".section-design").length<1)){$(".section-design .nav-tabs a").click(function(){var e=$(this).parent().position(),t=$(this).parent().width();$(".section-design .slider").css({left:+e.left,width:t})});var e=$(".section-design .nav-tabs").find(".active").parent("li").width(),t=$(".section-design .nav-tabs .active").position();if($(".section-design .slider").css({left:+t.left,width:e}),document.querySelector(".swiper-design-parallax")){let i=new Map;function s(e){var t=new Swiper(e,{centeredSlides:!0,slidesPerView:1.5,spaceBetween:24,speed:900,parallax:!0,loop:!0,loopedSlides:2,autoplay:{delay:2e3},pagination:{el:e.querySelector(".swiper-pagination"),type:"progressbar"},navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")},breakpoints:{991:{slidesPerView:1.5,spaceBetween:40,autoplay:!1}}});i.set(e,t)}document.querySelectorAll(".swiper-design-parallax").forEach(e=>{var t=e.closest(".tab-pane");t&&t.classList.contains("active")&&s(e)}),document.querySelectorAll('[data-bs-toggle="tab"]').forEach(e=>{e.addEventListener("shown.bs.tab",e=>{e=document.querySelector(e.target.getAttribute("data-bs-target")).querySelector(".swiper-design-parallax");e&&(i.has(e)?i.get(e).update():s(e))})})}}}function animateTextKaraoke(){$(".effect-karaoke").length<1||(gsap.registerPlugin(ScrollTrigger,SplitText),gsap.utils.toArray(".effect-karaoke").forEach(e=>{var t=new SplitText(e,{type:"words, chars",wordsClass:"word",charsClass:"char"});gsap.to(t.chars,{color:"#000",duration:.6,stagger:.05,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%",end:"top 30%",scrub:!0}})}))}function svgSokoda(){gsap.registerPlugin(ScrollTrigger),document.querySelectorAll(".skoda-car").forEach(e=>{ScrollTrigger.create({trigger:e,start:"top 80%",onEnter:()=>{e.classList.add("active-svg")},once:!0})})}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),heroSwiper(),animateTextKaraoke(),svgSokoda(),sectionDesign()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0,console.log("1"))}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});